<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<!--
索志文
-->
<mapper namespace="team.ruike.imm.dao.WarehousingDao">
        <resultMap id="WarehousingMap" type="warehousing">
            <result property="warehousingId" column="warehousing_id" />
            <result property="warehousingBatchNumber" column="warehousing_batch_number" />
            <result property="warehousingDate" column="warehousing_date" />
            <result property="warehousingRemarks" column="warehousing_remarks" />
            <result property="warehousingState" column="warehousing_state" />
                <!-- 采购订单编号-->
            <collection property="procurement" ofType="procurement">
                <result property="procurementId" column="procurement_id"/>
                <result property="procurementDate" column="procurement_date"/>
                <result property="supplierId" column="supplier_id"/>
                <result property="procurementEmployeeId" column="procurement_employee_id"></result>
                <result property="procurementAccomplish" column="procurement_accomplish"/>
                <result property="procurementState" column="procurement_state"/>
            </collection>
            <!--入库人信息 员工信息-->
            <collection property="employee" ofType="employee">
                <result column="employee_id" property="employeeId" />
                <result column="employee_name" property="employeeName" />
                <result column="position_id" property="positionId" />
                <result column="employee_id_number" property="employeeIdNumber" />
                <result column="employee_mobile_phone" property="employeeMobilePhone" />
                <result column="employee_email" property="employeeEmail" />
                <result column="employee_address" property="employeeAddress" />
                <result column="employee_state" property="employeeState" />
            </collection>
                <!-- 经办人信息 用户信息-->
            <collection property="user" ofType="user">
                <result column="user_id" property="userId"></result>
                <result column="user_name" property="userName"></result>
                <result column="user_password" property="userPassword"></result>
                <result column="employee_id" property="employeeId"></result>
                <result column="user_state" property="userState"></result>
            </collection>
        </resultMap>
    <!-- 指定条件查询入库记录信息-->
    <select id="selectWarehousing" resultMap="WarehousingMap" parameterType="warehousing">
        select * from warehousing
        <where>
            1=1
            <if test="warehousingId!=null and warehousingId>0">
                and warehousing_id=#{warehousingId}
            </if>
            <if test="warehousingBatchNumber !=null and warehousingBatchNumber>0">
                and warehousing_batch_number =#{warehousingBatchNumber}
            </if>
            <if test="warehousingBuyer!=null and warehousingBuyer>0">
                and warehousing_buyer=#{warehousingBuyer}
            </if>
            <if test="procurementId !=null and procurementId>0">
                and procurement_id=#{procurementId}
            </if>
            <if test="warehousingDate!=null and warehousingDate!=''">
                and warehousing_date=#{warehousingDate}
            </if>
            <if test="warehousingRemarks!=null and warehousingRemarks!=''">
                and warehousing_remarks =#{warehousingRemarks}
            </if>
            <if test="warehousingUserId !=null and warehousingUserId>0">
                and warehousing_user_id=#{warehousingUserId}
            </if>
            <if test="warehousingState!=null and warehousingState>0">
                and warehousing_state=#{warehousingState}
            </if>
        </where>
    </select>

    <!-- 指定条件修改入库记录信息-->
    <update id="updateWarehousing" parameterType="warehousing">
        <set>
            <if test="warehousingBatchNumber !=null and warehousingBatchNumber>0">
                 warehousing_batch_number =#{warehousingBatchNumber},
            </if>
            <if test="warehousingBuyer!=null and warehousingBuyer>0">
                 warehousing_buyer=#{warehousingBuyer},
            </if>
            <if test="procurementId !=null and procurementId>0">
                 procurement_id=#{procurementId},
            </if>
            <if test="warehousingDate!=null and warehousingDate!=''">
                 warehousing_date=#{warehousingDate},
            </if>
            <if test="warehousingRemarks!=null and warehousingRemarks!=''">
                 warehousing_remarks =#{warehousingRemarks},
            </if>
            <if test="warehousingUserId !=null and warehousingUserId>0">
                 warehousing_user_id=#{warehousingUserId},
            </if>
            <if test="warehousingState!=null and warehousingState>0">
                 warehousing_state=#{warehousingState},
            </if>
        </set>
        where warehousing_id=#{warehousingId}
    </update>
    <!--增加入库记录信息 -->
    <insert id="insertWarehousing" parameterType="warehousing">
        INSERT into warehousing VALUES(default,
        #{warehousingBatchNumber},#{warehousing_buyer},
        #{procurementId},#{warehousingDate},#{warehousingRemarks},#{warehousingUserId},#{warehousingState});
    </insert>
</mapper>

