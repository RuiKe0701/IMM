<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >

<mapper namespace="team.ruike.imm.dao.WarehousingParticularDao">

        <resultMap id="ParticularMap" type="WarehousingParticular">

            <result column="wp_id" property="wpId"/>
            <result column="warehousing_id" property="warehousingId"/>
            <result column="merchandise_id" property="merchandiseId"/>
            <result column="wp_number" property="wpNumber"/>
            <result column="wp_predict_number" property="wpPredictNumber"/>
            <result column="wp_practical_number" property="wpPracticalNumber"/>
            <result column="wp_damage_number" property="wpDamageNumber"/>

        <collection property="warehousing" ofType="warehousing">
            <result property="warehousingId" column="warehousing_id" />
            <result property="warehousingBatchNumber" column="warehousing_batch_number" />
            <result property="warehousingBuyer" column="warehousing_buyer" />
            <result property="procurementId" column="procurement_id"/>
            <result property="warehousingDate" column="warehousing_date" />
            <result property="warehousingRemarks" column="warehousing_remarks" />
            <result property="warehousingUserId" column="warehousing_user_id"/>
            <result property="warehousingState" column="warehousing_state" />
        </collection>
    </resultMap>

    <select id="selectParticular" resultMap="ParticularMap" parameterType="WarehousingParticular">
        select w_p.wp_id,w_p.warehousing_id,w_p.merchandise_id,w_p.wp_number,w_p.wp_predict_number,w_p.wp_practical_number,w_p.wp_damage_number
        from warehousing_particular w_p
        <where>
            1=1
            <if test="wpId!=null and wpId>0">
                and w_p.wp_id=#{wpId}
            </if>
            <if test="warehousingId !=null and warehousingId!=''">
                and w_p.warehousing_id=#{warehousingId}
            </if>
            <if test="merchandiseId!=null and merchandiseId>0">
                and w_p.merchandise_id=#{merchandiseId}
            </if>
            <if test="wpNumber!=null and wpNumber>0">
                and w_p.wp_number=#{wpNumber}
            </if>
            <if test="wpPredictNumber!=null and wpPredictNumber>0">
                and w_p.wp_predict_number=#{wpPredictNumber}
            </if>
            <if test="wpPracticalNumber!=null and wpPracticalNumber>0">
                and w_p.wp_practical_number=#{wpPracticalNumber}
            </if>
            <if test="wpDamageNumber!=null and wpDamageNumber>0">
                and w_p.wp_damage_number=#{wpDamageNumber}
            </if>
        </where>
    </select>

    <update id="updateParticular" parameterType="WarehousingParticular">
        update warehousing_particular
        <set>
            <if test="warehousingId !=null and warehousingId!=''">
                warehousing_id=#{warehousingId}
            </if>
            <if test="merchandiseId!=null and merchandiseId>0">
                merchandise_id=#{merchandiseId}
            </if>
            <if test="wpNumber!=null and wpNumber>0">
                wp_number=#{wpNumber}
            </if>
            <if test="wpPredictNumber!=null and wpPredictNumber>0">
                wp_predict_number=#{wpPredictNumber}
            </if>
            <if test="wpPracticalNumber!=null and wpPracticalNumber>0">
                wp_practical_number=#{wpPracticalNumber}
            </if>
            <if test="wpDamageNumber!=null and wpDamageNumber>0">
                wp_damage_number=#{wpDamageNumber}
            </if>
            <where>
                wp_id=#{wpId}
            </where>
        </set>
    </update>

    <insert id="insertParticular" parameterType="WarehousingParticular">
        insert into
        warehousing_particular(warehousing_id,merchandise_id,wpNumber,wp_predict_number,wp_practical_number,wp_damage_number)
        values(#{warehousingId},#{merchandiseId},#{wpNumber},#{wpPredictNumber},#{wpPracticalNumber},#{wpDamageNumber})
    </insert>



</mapper>